[mypy]
python_version = 3.13
ignore_missing_imports = True
warn_unused_ignores = False
warn_redundant_casts = True
warn_unused_configs = True
show_error_codes = True
exclude = (?x)(^tests/|^build/)
follow_imports = skip

explicit_package_bases = True

# Include both src and scripts in default checks
files = src, scripts

; scripts are now enforced; per-module sections below can still tune behavior

# Default stance for scripts: temporarily ignore to keep baseline green; we will
# explicitly opt in selected scripts to strict mode and widen over time.
[mypy-scripts.*]
ignore_errors = True
[mypy-scripts.sanitize_csv_expiries]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.csv_audit]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.gen_env_catalog]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.init_menu]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
# call-overload is not a valid code; rely on per-call ignores or refactors if needed

[mypy-scripts.dev_tools]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.weekday_overlay]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.overlay_exporter]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.overlay_replay]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.panels_integrity_check]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.package_dashboards]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.validate_spec_panel_coverage]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.export_dashboard_inventory]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.summary.metrics_server]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
# call-overload is not a valid code; keep strict and refactor if noisy

[mypy-scripts.summary.app]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.gen_dashboards_modular]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.gen_dashboards_modular_recovery]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.gen_dashboards]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.summary.plugins.base]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
# Optional context and late-bound dicts can trigger attr-defined in this module
disable_error_code = attr-defined

[mypy-scripts.summary.sse_http]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
# no-redef cannot be disabled via code; keep strict and refactor if needed

[mypy-scripts.summary.unified_http]
ignore_errors = False
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
# truthy-function cannot be disabled via code; keep strict and refactor if needed

[mypy-scripts.csv_backfill]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.debug_option_match]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.dashboard_diff]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-scripts.generate_mock_option_universe]
ignore_errors = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True

[mypy-src.web.dashboard.*]
# Stricter typing for dashboard code path (Wave 4 Task 8)
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
warn_unreachable = True
strict_equality = True
# Allow gradual adoption: keep ignore_missing_imports from global for now

[mypy-src.broker.kite.*]
# Temporarily defer strict typing for kite provider while nucleus stabilizes
ignore_errors = True

[mypy-src.collectors.pipeline]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal

[mypy-src.collectors.pipeline.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal

[mypy-src.collectors.pipeline_root]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal

# Phase 1 strict nucleus above. The following legacy modules are temporarily silenced
# to allow incremental tightening without blocking progress. Each will be removed
# from ignore_errors in subsequent phases (tracked in Wave 4 expansion plan).
[mypy-src.collectors.unified_collectors]
ignore_errors = True
[mypy-src.collectors.pipeline.executor]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal
[mypy-src.collectors.pipeline.phases]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal
[mypy-src.collectors.pipeline.shadow]
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal
[mypy-src.collectors.providers_interface]
ignore_errors = True
[mypy-src.collectors.modules.context]
ignore_errors = True
[mypy-src.collectors.modules.index_processor]
ignore_errors = True
[mypy-src.collectors.modules.*]
# Narrow shields: remove blanket ignore; we will unshield in slices.
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal

# (Phase 3) Start with expiry/* subset; others may still be noisy but we want visibility.
# memory_pressure_bridge retains shield temporarily (high OS surface) â€“ will remove later.
[mypy-src.collectors.modules.memory_pressure_bridge]
ignore_errors = True

# Supporting utils temporarily ignored (imported transitively by collectors)
[mypy-src.utils.output]
ignore_errors = True
[mypy-src.utils.memory_pressure]
ignore_errors = True
[mypy-src.utils.memory_manager]
ignore_errors = True

[mypy-src.parity.*]
# Parity scoring & signature components strict typing
disallow_untyped_defs = True
disallow_incomplete_defs = True
no_implicit_optional = True
warn_return_any = True
strict_equality = True
follow_imports = normal

