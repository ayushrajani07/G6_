###############################################
# G6 SUMMARY / LOG OUTPUT ENVIRONMENT FLAGS   #
# ------------------------------------------- #
# This file lists key environment variables   #
# controlling banner, timing, table and struct#
# logging behaviour. Copy lines into your own #
# .env (do not commit secrets). Values shown  #
# are defaults unless stated otherwise.       #
###############################################

# ---- General Formatting / Headers ----
G6_SINGLE_HEADER_MODE=0            # When 1 emit daily header once centrally (orchestrator) instead of per invocation
G6_DISABLE_REPEAT_BANNERS=1        # Suppress repeat DAILY header / market-open banners (set 0 to allow repeats)
G6_COMPACT_BANNERS=0               # When 1 use compact single-line daily header instead of block style
G6_DAILY_HEADER_EVERY_CYCLE=0      # Force daily header each cycle (overrides SINGLE_HEADER_MODE) - diagnostic
G6_BANNER_DEBUG=0                  # When 1 emit debug lines explaining why banners were suppressed

# ---- Phase Timing & Performance ----
G6_PHASE_TIMING_MERGE=1            # Merge phase timing segments into single dict (auto-enabled by SINGLE_HEADER_MODE)
G6_PHASE_TIMING_SINGLE_EMIT=1      # Emit merged timing once near end of collectors (suppresses intermediate merged lines)
G6_GLOBAL_PHASE_TIMING=0           # NEW: When 1 suppress all PHASE_TIMING_MERGED lines and emit single PHASE_TIMING_GLOBAL per cycle (orchestrator)

# ---- Cycle Tables (Deprecated â€“ tables removed) ----
G6_DISABLE_CYCLE_TABLES=0          # DEPRECATED (no-op) legacy table system removed
G6_DEFER_CYCLE_TABLES=0            # DEPRECATED (no-op) deferral path removed
G6_CYCLE_TABLE_GRACE_MS=0          # DEPRECATED (no-op) grace delay removed
G6_CYCLE_TABLE_GRACE_MAX_MS=0      # DEPRECATED (no-op)

# ---- Structured Logging & Compact Mode ----
G6_STRUCT_COMPACT=0                # When 1 apply payload compaction to structured events
G6_DISABLE_COLOR=0                 # Set 1 to disable ANSI color codes in human tables / banners

# ---- FINNIFTY / Index Specific Handling ----
# FINNIFTY strike selection: only collect strikes multiple of 100 & disable adaptive widening
# (Behaviour is automatic; toggle not required. Provided for discoverability.)
G6_FINNIFTY_STRICT_100=1           # If set 0 disables the enforced modulo=100 strike filter (not recommended)

# ---- Adaptive / Scaling ----
G6_ADAPTIVE_SCALE_PASSTHROUGH=0    # Experimental: pass external adaptive scale_factor to strike builder

# ---- Late / Stale / Outage Detection ----
G6_PROVIDER_OUTAGE_THRESHOLD=3     # Cycles all indices empty before outage classification
G6_PROVIDER_OUTAGE_LOG_EVERY=5     # Log outage every N cycles after first detection
G6_STALE_ABORT_CYCLES=10           # When stale mode=abort: cycles before abort classification
G6_STALE_WRITE_MODE=mark           # mark|abort behaviour for stale cycles

# ---- Misc Metrics / Behaviour ----
G6_CYCLE_INTERVAL=60               # Nominal cycle interval seconds (used for SLA computation)
G6_CYCLE_SLA_FRACTION=0.85         # Fraction of interval budget considered SLA success
G6_MISSING_CYCLE_FACTOR=2.0        # Factor*interval gap to increment missing_cycle counter

# ---- Snapshot / Pipeline Convenience ----
G6_AUTO_SNAPSHOTS=0                # Enable automatic snapshot caching
G6_SNAPSHOT_CACHE=0                # Persist snapshots in in-memory cache for cross-cycle reuse
G6_PIPELINE_COLLECTOR=0            # Alternate pipeline collector mode (experimental)

# ---- Diagnostics / Tracing ----
G6_IMPORT_TRACE=0                  # Verbose module import tracing (debug only)

# ---- Suppression / Noise Controls ----
G6_STRUCT_EVENTS_SUPPRESS=         # Space/comma list of STRUCT event names to suppress (e.g. "adaptive_summary instrument_prefilter_summary option_match_stats")
G6_SUPPRESS_COVERAGE_WARNINGS=0    # When 1 suppress low coverage WARNING logs (instrument & field coverage); DEBUG still emitted
G6_SUPPRESS_METRIC_DUP_WARN=0      # When 1 silence duplicate metric registration warnings (metric.register.failed)

# NOTE: Duplicate flag entries removed (previously G6_DEFER_CYCLE_TABLES and G6_BANNER_DEBUG repeated).
#       Keep this file lean; group related flags once to reduce cognitive load.

# Implementation Notes:
# * GLOBAL_PHASE_TIMING automatically benefits from existing merge+single emit; you do not need to set the other two when enabling it.
# * If GLOBAL_PHASE_TIMING=1 the intermediate PHASE_TIMING_MERGED and single-emit lines are suppressed; only PHASE_TIMING_GLOBAL appears.
# * Order of evaluation: unified_collectors records merged times -> global accumulator -> orchestrator emits once per cycle.
# * Defer tables + grace allows late-arriving analytics to appear in final flush without duplicate table spam.

# End of .env.summary
